<?php
// 1. SETUP
require 'includes/db_connect.php';
require 'includes/header.php';

// 2. FORM HANDLING
$msg = "";
$msgClass = "";
if (isset($_POST['send_message'])) {
    $name = htmlspecialchars($_POST['name']);
    $msg = "Message sent! We'll get back to you soon, $name.";
    $msgClass = "active";
}
?>

<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<style>
    /* =========================================
       1. VARIABLES & RESET
       ========================================= */
    :root {
        --navy: #0a192f;
        --navy-light: #112240;
        --gold: #FDB913;
        --green: #64ffda;
        --red: #C8102E;
        --white: #ffffff;
        --text-gray: #8892b0;
        --font-serif: 'Playfair Display', serif;
        --font-sans: 'Poppins', sans-serif;
    }

    body {
        font-family: var(--font-sans);
        background-color: var(--white);
        overflow-x: hidden;
    }

    /* NUCLEAR LOGO FIX */
    .nav-logo img, header img, nav img {
        max-height: 60px !important;
        width: auto !important;
        max-width: 180px !important;
        object-fit: contain !important;
    }

    main { margin-top: 80px; } /* Header Gap */

    /* =========================================
       2. SPLIT LAYOUT (The New Theme)
       ========================================= */
    .split-container {
        display: grid;
        grid-template-columns: 1fr 1.2fr; /* Info (45%) | Form (55%) */
        min-height: calc(100vh - 80px); /* Full height minus header */
    }

    /* --- LEFT PANEL: THE "CANVAS" --- */
    .info-panel {
        background: var(--navy);
        color: var(--white);
        padding: 80px 60px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }
    
    /* Background Pattern (Abstract Art) */
    .info-panel::before {
        content: ''; position: absolute; top: -50px; right: -50px;
        width: 300px; height: 300px;
        border: 2px solid rgba(253, 185, 19, 0.1);
        border-radius: 50%;
    }
    .info-panel::after {
        content: ''; position: absolute; bottom: -50px; left: -50px;
        width: 400px; height: 400px;
        border: 40px solid rgba(255, 255, 255, 0.03);
        border-radius: 50%;
    }

    .panel-content { position: relative; z-index: 2; }

    .big-title {
        font-family: var(--font-serif);
        font-size: 3.5rem;
        line-height: 1.1;
        margin-bottom: 20px;
    }
    .big-title span { color: var(--gold); font-style: italic; }

    .panel-desc {
        color: var(--text-gray);
        font-size: 1.1rem;
        margin-bottom: 60px;
        max-width: 400px;
        line-height: 1.8;
    }

    /* Contact List */
    .contact-list { list-style: none; padding: 0; margin: 0; }
    .contact-item {
        display: flex; align-items: center; gap: 20px;
        margin-bottom: 30px;
        font-size: 1.1rem;
    }
    .icon-circle {
        width: 50px; height: 50px;
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        color: var(--gold);
        font-size: 1.2rem;
        transition: 0.3s;
    }
    .contact-item:hover .icon-circle {
        background: var(--gold); color: var(--navy); border-color: var(--gold);
        transform: scale(1.1);
    }
    .contact-link { color: var(--white); text-decoration: none; transition: 0.3s; }
    .contact-link:hover { color: var(--gold); padding-left: 10px; }

    /* Social Row */
    .social-row { margin-top: 60px; display: flex; gap: 20px; }
    .social-link {
        color: var(--text-gray); font-size: 1.5rem; transition: 0.3s;
    }
    .social-link:hover { color: var(--gold); transform: translateY(-5px); }


    /* --- RIGHT PANEL: THE "FORM" --- */
    .form-panel {
        background: var(--white);
        padding: 80px 10%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .form-header { margin-bottom: 50px; }
    .form-header h2 { font-family: var(--font-serif); font-size: 2.5rem; color: var(--navy); margin-bottom: 10px; }
    .form-header p { color: #666; }

    /* Floating Line Inputs (Sketchbook Style) */
    .input-group {
        position: relative;
        margin-bottom: 40px;
    }
    
    .clean-input {
        width: 100%;
        padding: 10px 0;
        border: none;
        border-bottom: 2px solid #eee;
        background: transparent;
        font-family: var(--font-sans);
        font-size: 1.1rem;
        color: var(--navy);
        transition: 0.3s;
    }
    .clean-input:focus {
        outline: none;
        border-bottom-color: var(--gold);
    }

    /* Floating Label Animation */
    .clean-label {
        position: absolute;
        top: 10px; left: 0;
        color: #999;
        font-size: 1rem;
        pointer-events: none;
        transition: 0.3s ease all;
    }
    
    /* When input has focus or value */
    .clean-input:focus ~ .clean-label,
    .clean-input:valid ~ .clean-label {
        top: -20px;
        font-size: 0.8rem;
        color: var(--gold);
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
    }

    .btn-submit {
        background: var(--navy);
        color: var(--white);
        padding: 20px 50px;
        font-size: 1rem;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        border: none;
        cursor: pointer;
        transition: 0.4s;
        display: inline-block;
        margin-top: 20px;
        position: relative;
        overflow: hidden;
    }
    .btn-submit::before {
        content: ''; position: absolute; top:0; left:0; width:0%; height:100%;
        background: var(--gold); transition: 0.4s; z-index: 1;
    }
    .btn-submit:hover::before { width: 100%; }
    .btn-submit span { position: relative; z-index: 2; transition: 0.4s; }
    .btn-submit:hover span { color: var(--navy); }

    /* Success Message */
    .msg-box {
        background: var(--green); color: white; padding: 15px;
        margin-bottom: 30px; display: none;
    }
    .msg-box.active { display: block; animation: slideDown 0.5s ease; }

    /* --- 3. BOTTOM MAP STRIP --- */
    .map-strip {
        height: 350px;
        width: 100%;
        filter: grayscale(100%) contrast(1.2);
        transition: 0.5s;
    }
    .map-strip:hover { filter: grayscale(0%); }

    /* RESPONSIVE */
    @media (max-width: 992px) {
        .split-container { grid-template-columns: 1fr; }
        .info-panel { padding: 60px 30px; min-height: auto; }
        .form-panel { padding: 60px 30px; }
        .big-title { font-size: 2.8rem; }
    }
    @keyframes slideDown { from { opacity:0; transform: translateY(-10px); } to { opacity:1; transform: translateY(0); } }
</style>

<main>
    
    <div class="split-container">
        
        <div class="info-panel" data-aos="fade-right">
            <div class="panel-content">
                <h1 class="big-title">Let's Create<br><span>Something</span> Together.</h1>
                <p class="panel-desc">
                    Whether you are a student, an artist, or a patron of the arts, Inkingi is your home. Reach out to us directly.
                </p>

                <ul class="contact-list">
                    <li class="contact-item">
                        <div class="icon-circle"><i class="fas fa-map-marker-alt"></i></div>
                        <div>
                            <span style="display:block; font-size:0.8rem; opacity:0.6; text-transform:uppercase;">Visit Us</span>
                            <a href="#" class="contact-link">Kigali, Kacyiru, 24 KG 550 St</a>
                        </div>
                    </li>
                    <li class="contact-item">
                        <div class="icon-circle"><i class="fas fa-phone"></i></div>
                        <div>
                            <span style="display:block; font-size:0.8rem; opacity:0.6; text-transform:uppercase;">Call Us</span>
                            <a href="tel:+250787177805" class="contact-link">+250 787 177 805</a>
                        </div>
                    </li>
                    <li class="contact-item">
                        <div class="icon-circle"><i class="fas fa-envelope"></i></div>
                        <div>
                            <span style="display:block; font-size:0.8rem; opacity:0.6; text-transform:uppercase;">Email</span>
                            <a href="mailto:yamwamba01@gmail.com" class="contact-link">yamwamba01@gmail.com</a>
                        </div>
                    </li>
                </ul>

                <div class="social-row">
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>

        <div class="form-panel" data-aos="fade-left">
            
            <div class="form-header">
                <h2>Drop Us a Line</h2>
                <p>Fill out the form below and we will get back to you within 24 hours.</p>
            </div>

            <div class="msg-box <?= $msgClass ?>"><?= $msg ?></div>

            <form method="POST">
                <div class="input-group">
                    <input type="text" name="name" class="clean-input" required>
                    <label class="clean-label">Your Name</label>
                </div>

                <div class="input-group">
                    <input type="email" name="email" class="clean-input" required>
                    <label class="clean-label">Email Address</label>
                </div>

                <div class="input-group">
                    <input type="text" name="subject" class="clean-input" value="<?= isset($_GET['book']) ? htmlspecialchars($_GET['book']) : '' ?>" required>
                    <label class="clean-label">Subject / Program Interest</label>
                </div>

                <div class="input-group">
                    <textarea name="message" class="clean-input" rows="1" style="resize:none; height:auto; min-height:40px;" oninput="this.style.height = ''; this.style.height = this.scrollHeight + 'px'" required></textarea>
                    <label class="clean-label">Your Message</label>
                </div>

                <button type="submit" name="send_message" class="btn-submit">
                    <span>Send Message</span>
                </button>
            </form>

        </div>

    </div>

    <div class="map-strip">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3987.532726322982!2d30.0881!3d-1.9351!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMsKwNTYnMDYuNCJTIDMwwrAwNScxNy4yIkU!5e0!3m2!1sen!2srw!4v1635000000000!5m2!1sen!2srw" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
    </div>

</main>

<?php include 'includes/footer.php'; ?>

<script>
    AOS.init({ duration: 1000, once: true });
</script>